# gogithub Roadmap

This roadmap documents planned and completed features for this project.

The format is based on and generated by [Structured Roadmap](https://github.com/grokify/structured-roadmap), which provides a machine-readable JSON intermediate representation with deterministic Markdown generation.

## Overview

gogithub is a Go client library for the GitHub API, providing high-level operations for authentication, search, repositories, pull requests, and releases.

This roadmap tracks improvements identified during code review to enhance code quality, test coverage, and feature completeness.

---

## Critical

### [ ] Add comprehensive test suite

Zero test files in entire codebase. Create *_test.go files for each package with >80% coverage target.

- [ ] Add tests for auth package
- [ ] Add tests for search package
- [ ] Add tests for repo package
- [ ] Add tests for pr package
- [ ] Add tests for release package
- [ ] Add tests for cliutil package

### [ ] Fix hardcoded path in bulk_git_rm

cliutil/cmd/bulk_git_rm/main.go:15 contains hardcoded user-specific path. Should accept directory as command-line flag.

---

## High Priority

### [ ] Add QueryBuilder for type-safe query construction

Add QueryBuilder type alongside existing Query map type. Provides type-safe builder methods for common qualifiers while preserving map flexibility for new/uncommon GitHub search qualifiers. Includes Set() escape hatch for any qualifier.

- [ ] Create QueryBuilder struct wrapping Query map
- [ ] Add builder methods (User, State, Is, Org, Repo, Author, Assignee, Label)
- [ ] Add Set(key, value) escape hatch for any qualifier
- [ ] Add Build() method returning Query map
- [ ] Update SearchOpenPullRequests to use QueryBuilder

### [x] Add Unwrap() to AuthError

auth.AuthError doesn't implement Unwrap() unlike other custom error types. Add for Go 1.13+ error chain compatibility.

### [ ] Extract pagination utility

Nearly identical pagination code exists in repo/list.go, release/release.go, and search/search.go. Create shared pagination helper to reduce duplication.

### [x] Make Query.Encode() deterministic

Query.Encode() iterates over map which has non-deterministic order. Sort keys before encoding to ensure consistent output.

### [x] Remove backward compatibility shims from root package

Remove deprecated re-exports from gogithub.go added in v0.3.0 for backward compatibility. Users should migrate to importing subpackages directly (auth/, search/, repo/, pr/, release/).

- [x] Remove Client type wrapper from root package
- [x] Remove NewClient() and NewClientWithToken() from root package
- [x] Remove Query, Issues, Issue type aliases
- [x] Remove re-exported constants (ParamUser, ParamState, etc.)
- [x] Remove SearchOpenPullRequests, SearchIssues, SearchIssuesAll wrapper methods

### [ ] Update README for v81

README references go-github v68 but go.mod uses v81. Align documentation with actual version.

---

## Medium Priority

### [ ] Add cliutil package documentation

cliutil package has no package-level documentation comment. Add clear description of package purpose.

### [ ] Add release write operations

Release package only has read operations. Add CreateRelease, UpdateRelease, DeleteRelease functions.

- [ ] Add CreateRelease function
- [ ] Add UpdateRelease function
- [ ] Add DeleteRelease function

### [ ] Improve fork async handling

EnsureFork uses hardcoded time.Sleep() without retries. Implement proper retry mechanism with exponential backoff.

### [x] Relocate misplaced constants to appropriate packages

Move constants currently in search/issues.go to more appropriate locations: bot user constants (UsernameDependabot, UserIDDependabot) to auth/ package, URL constants (BaseURLRepoAPI, BaseURLRepoHTML) to root package.

- [x] Move UsernameDependabot, UserIDDependabot to auth/ package
- [x] Move BaseURLRepoAPI, BaseURLRepoHTML to root package
- [x] Update internal imports to use new locations

### [ ] Remove NewClientHTTP from search package

Remove search.NewClientHTTP() factory function. Users should use auth.NewGitHubClient() or github.NewClient() to create the GitHub client, then pass it to search.NewClient().

---

## Enhancements

### [ ] Add branch protection operations

Add functions for managing branch protection rules.

### [ ] Add webhook operations

Add functions for managing repository webhooks.

### [ ] Reduce external dependencies

gocharts pulled in just for table generation in search package. Consider moving table generation to separate subpackage or module.

### [ ] Standardize client initialization

Multiple ways to create clients exist (NewClient, NewClientWithToken, NewClientHTTP, NewGitHubClient). Document preferred approach and consider deprecating redundant factories.

---

## Contributing

Contributions are welcome! Priority areas:

- Test coverage for all packages
- Documentation improvements
- Bug fixes for identified issues
- New GitHub API operations
